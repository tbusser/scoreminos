(()=>{"use strict";(()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.steps=e,this.config=t,this.setup()}var i,r;return i=n,(r=[{key:"activeIndex",get:function(){var e,t=this;return null===(e=this.steps)||void 0===e?void 0:e.findIndex((function(e){return e.id===t.activeStepId}))}},{key:"activateStep",value:function(e){var t;this.setVisibility(e,!0),this.activeStepId=e.id,null===(t=this.config.onInstanceActivated)||void 0===t||t.call(this,e)}},{key:"deactivateStep",value:function(e){this.setVisibility(e,!1)}},{key:"getInstance",value:function(e){return e.instance||(e.instance=this.config.instanceFactory(e.id)),e.instance}},{key:"setup",value:function(){var t,n,i=(t=this.steps,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return o}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];this.activateStep(i)}},{key:"setVisibility",value:function(e,t){var n=this.getInstance(e);return!!n&&(n.isVisible=t,!0)}},{key:"goBack",value:function(){var e=this.activeIndex;void 0!==e&&0!==e&&(this.deactivateStep(this.steps[e]),this.activateStep(this.steps[e-1]))}},{key:"goForward",value:function(){var e=this.activeIndex;void 0!==e&&e!==this.steps.length-11&&(this.deactivateStep(this.steps[e]),this.activateStep(this.steps[e+1]))}},{key:"goTo",value:function(e){var t=this.steps.find((function(t){return t.id===e}));void 0!==t&&(this.deactivateStep(this.steps[this.activeIndex]),this.activateStep(t))}}])&&t(i.prototype,r),n}();function i(e,t,n){if(!n||"function"!=typeof n.value)throw new TypeError("Only methods can be decorated with @bind. <".concat(t,"> is not a method!"));return{configurable:!0,get:function(){var e,i=null===(e=n.value)||void 0===e?void 0:e.bind(this);return Object.defineProperty(this,t,{value:i,configurable:!0,writable:!0}),i}}}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o,a,l,u=0,c=function(){function e(t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(i="_score")in this?Object.defineProperty(this,i,{value:0,enumerable:!0,configurable:!0,writable:!0}):this[i]=0,this.name=t,this._id=Symbol("player__".concat(u++)),this._tiles=n}var t,n;return t=e,(n=[{key:"hasEmptyHand",get:function(){return 0===this._tiles}},{key:"id",get:function(){return this._id}},{key:"score",get:function(){return this._score}},{key:"tileCount",get:function(){return this._tiles}},{key:"setTileCount",value:function(e){this._tiles=e}},{key:"updateScore",value:function(e){return this._score+=e,this._score}},{key:"updateTileCount",value:function(e){return this._tiles+=e,this._tiles}}])&&r(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d,y,h,p,v,b,m,g,k,P=Symbol("singleton"),w=(l=a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"activeIndex",null),f(this,"_activePlayer",null),f(this,"_players",[]),t!==P)throw"Use the static property instance to get the PlayerManager"}var t,n,i;return t=e,i=[{key:"instance",get:function(){return null===e._instance&&(e._instance=new e(P)),e._instance}}],(n=[{key:"activePlayer",get:function(){return this.createPlayerSummary(this._activePlayer)}},{key:"firstRankedPlayer",get:function(){var e=this._players.reduce((function(e,t){return t.score>e.score?t:e}),{score:-1/0});return this.createPlayerSummary(e)}},{key:"players",get:function(){return this._players.map(this.createPlayerSummary)}},{key:"createPlayerSummary",value:function(e){var t;return{hasEmptyHand:e.hasEmptyHand,id:e.id,isActive:(null===(t=this._activePlayer)||void 0===t?void 0:t.id)===e.id,name:e.name,score:e.score,tileCount:e.tileCount}}},{key:"activateNextPlayer",value:function(){return this.activeIndex=(this.activeIndex+1)%this._players.length,this._activePlayer=this._players[this.activeIndex],this.players[this.activeIndex]}},{key:"createPlayers",value:function(e,t){this.activeIndex=null,this._activePlayer=null,this.tilesPerRound=t,this._players=e.map((function(e){return new c(e,t)}))}},{key:"setActivePlayer",value:function(e){return this.activeIndex=this._players.findIndex((function(t){return t.id===e})),this._activePlayer=this._players[this.activeIndex],this.players[this.activeIndex]}},{key:"resetTileCount",value:function(){var e=this;this._players.forEach((function(t){var n;return t.setTileCount(null!==(n=e.tilesPerRound)&&void 0!==n?n:0)}))}},{key:"updateActivePlayerScore",value:function(e){var t,n;return null!==(t=null===(n=this._activePlayer)||void 0===n?void 0:n.updateScore(e))&&void 0!==t?t:0}},{key:"updateActivePlayerTileCount",value:function(e){var t,n;return null!==(t=null===(n=this._activePlayer)||void 0===n?void 0:n.updateTileCount(e))&&void 0!==t?t:0}},{key:"updatePlayerScore",value:function(e,t){var n,i=this._players.find((function(t){return t.id===e}));return null!==(n=null==i?void 0:i.updateScore(t))&&void 0!==n?n:0}}])&&s(t.prototype,n),i&&s(t,i),e}(),f(a,"_instance",null),d=(o=l).prototype,y="createPlayerSummary",h=[i],p=Object.getOwnPropertyDescriptor(o.prototype,"createPlayerSummary"),v=o.prototype,b={},Object.keys(p).forEach((function(e){b[e]=p[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=h.slice().reverse().reduce((function(e,t){return t(d,y,e)||e}),b),v&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(v):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(d,y,b),b=null),o);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Default="default",e.Collection="collection",e.RoundStart="round-start"}(m||(m={})),function(e){e.Bridge="bridge",e.DoubleSided="double-sided",e.Hexagon="hexagon"}(g||(g={}));var _=[9,7,7,6,6],O=(S(k={},g.Bridge,40),S(k,g.DoubleSided,40),S(k,g.Hexagon,50),k);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var C,T={id:Symbol("dummy"),points:1/0};function E(e){switch(e.turnType){case m.Default:return function(e){var t,n,i,r,o=void 0===e.points?-10:0;return(null!==(t=e.points)&&void 0!==t?t:0)+(i=e.completedShape,null!==(r=O[i])&&void 0!==r?r:0)+-5*(null!=(n=e.tilesDrawn)?n:0)+o}(e);case m.RoundStart:return function(e){var t,n=null!==(t=e.points)&&void 0!==t?t:0;return n+(e.isTriple?0===n?40:10:0)}(e);default:return 0}}function R(e){var t;return(void 0===e.points?0:-1)+(null!==(t=e.tilesDrawn)&&void 0!==t?t:0)}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=".js-".concat("dialog"),I="is-visible",L={closeTrigger:"".concat(z,"__close"),container:"".concat(z,"__container"),portal:"#dialog-portal"},D=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setup()}var t,n;return t=e,(n=[{key:"dialogContent",get:function(){return this.container}},{key:"onClose",value:function(){this.hideDialog()}},{key:"bindCloseEvent",value:function(){var e,t=null===(e=this.container)||void 0===e?void 0:e.querySelector(L.closeTrigger);null==t||t.addEventListener("click",this.onClose)}},{key:"fillPlaceholders",value:function(e,t){Object.keys(t).forEach((function(n){var i=e.querySelector('[data-placeholder="'.concat(n,'"]'));null!==i&&(i.textContent=t[n])}))}},{key:"getDialogContent",value:function(e){var t,n=document.getElementById("dialog-".concat(e));return null!==(t=null==n?void 0:n.content.firstElementChild.cloneNode(!0))&&void 0!==t?t:null}},{key:"setup",value:function(){var e;this.portal=document.querySelector(L.portal),this.container=null===(e=this.portal)||void 0===e?void 0:e.querySelector(L.container)}},{key:"hideDialog",value:function(){var e;this.portal.classList.remove(I),this.container.removeChild(this.container.firstElementChild),null===(e=this.closeCallback)||void 0===e||e.call(this),this.closeCallback=null}},{key:"showDialog",value:function(e,t){var n;this.closeCallback=t.onClose;var i=this.getDialogContent(e);t.placeholders&&this.fillPlaceholders(i,t.placeholders),this.container.appendChild(i),this.bindCloseEvent(),null===(n=t.onBeforeShow)||void 0===n||n.call(t,this.container),this.portal.classList.add(I)}}])&&x(t.prototype,n),e}()).prototype,"onClose",[i],Object.getOwnPropertyDescriptor(C.prototype,"onClose"),C.prototype),C);function A(e,t,n){var i=n?"add":"remove";e.classList[i](t)}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q,V=".js-".concat("header"),N="c-header--has-subtitle",H={subtitle:"".concat(V,"__subtitle"),title:"".concat(V,"__title")},W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.setup()}var t,n;return t=e,(n=[{key:"hasSubtitle",get:function(){return void 0!==this.subtitle}},{key:"subtitle",get:function(){var e,t=null===(e=this._subtitle)||void 0===e?void 0:e.textContent;return""===t?void 0:t},set:function(e){this.updateSubtitle(e)}},{key:"title",get:function(){var e;return null===(e=this._title)||void 0===e?void 0:e.textContent},set:function(e){null!==this._title&&(this._title.textContent=e)}},{key:"setup",value:function(){this._subtitle=this.base.querySelector(H.subtitle),this._title=this.base.querySelector(H.title),A(this.base,N,this.hasSubtitle)}},{key:"updateSubtitle",value:function(e){null!==this._subtitle&&(this._subtitle.textContent=null!=e?e:"",A(this.base,N,this.hasSubtitle))}},{key:"clearSubtitle",value:function(){this.subtitle=void 0}}])&&B(t.prototype,n),e}();function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var U=".js-".concat("footer"),G={buttonPrimary:"".concat(U,"__primary"),buttonSecondary:"".concat(U,"__secondary")},$=(M((q=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.config=n,this.setup(),this.bindEvents()}var t,n;return t=e,(n=[{key:"bindEvents",value:function(){var e,t;null===(e=this.primaryButton)||void 0===e||e.addEventListener("click",this.onPrimaryButtonClicked),null===(t=this.secondaryButton)||void 0===t||t.addEventListener("click",this.onSecondaryButtonClicked)}},{key:"onPrimaryButtonClicked",value:function(e){var t;null===(t=this.config.onPerformPrimaryAction)||void 0===t||t.call(this)}},{key:"onSecondaryButtonClicked",value:function(e){var t;null===(t=this.config.onPerformSecondaryAction)||void 0===t||t.call(this)}},{key:"setup",value:function(){this.primaryButton=this.base.querySelector(G.buttonPrimary),this.secondaryButton=this.base.querySelector(G.buttonSecondary)}},{key:"primaryEnabled",get:function(){var e,t;return null!==(e=null===(t=this.primaryButton)||void 0===t?void 0:t.disabled)&&void 0!==e&&e},set:function(e){null!==this.primaryButton&&(this.primaryButton.disabled=!e)}},{key:"secondaryEnabled",get:function(){var e,t;return null!==(e=null===(t=this.secondaryButton)||void 0===t?void 0:t.disabled)&&void 0!==e&&e},set:function(e){null!==this.secondaryButton&&(this.secondaryButton.disabled=!e)}},{key:"secondaryTitle",get:function(){var e,t;return null!==(e=null===(t=this.secondaryButton)||void 0===t?void 0:t.textContent)&&void 0!==e?e:""},set:function(e){null!==this.secondaryButton&&(this.secondaryButton.textContent=e)}}])&&F(t.prototype,n),e}()).prototype,"onPrimaryButtonClicked",[i],Object.getOwnPropertyDescriptor(q.prototype,"onPrimaryButtonClicked"),q.prototype),M(q.prototype,"onSecondaryButtonClicked",[i],Object.getOwnPropertyDescriptor(q.prototype,"onSecondaryButtonClicked"),q.prototype),q);function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.setupBase()}var t,n;return t=e,(n=[{key:"isVisible",get:function(){return!this.base.hidden},set:function(e){this.base.hidden=!e}},{key:"secondaryActionTitle",get:function(){return this.footer.secondaryTitle},set:function(e){this.footer.secondaryTitle=e}},{key:"onSecondaryAction",value:function(){}},{key:"onPrimaryAction",value:function(){}},{key:"setupBase",value:function(){var e=this,t=this.base.querySelector(V),n=this.base.querySelector(U);null!==t&&(this.header=new W(t)),null!==n&&(this.footer=new $(n,{onPerformPrimaryAction:function(){return e.onPrimaryAction()},onPerformSecondaryAction:function(){return e.onSecondaryAction()}}))}}])&&J(t.prototype,n),e}();function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var X=".js-".concat("player-input"),Y=("".concat(X,"__form"),"input"),Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t}var t,n;return t=e,(n=[{key:"playerNames",get:function(){return this.getPlayerNames()}},{key:"getPlayerNames",value:function(){var e=this.base.querySelectorAll(Y);return Array.from(e).map((function(e){return e.value.trim()})).filter((function(e){return""!==e}))}}])&&Q(t.prototype,n),e}();function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie={messageSelector:".js-message",scrollToVisible:!0};function re(e,t,n){var i=te(te({},ie),n),r=Array.from(e.querySelectorAll(i.messageSelector));if(r.forEach((function(e){e.hidden=!t.includes(e.id)})),i.scrollToVisible){var o=r.find((function(e){return!e.hidden}));null==o||o.scrollIntoView({behavior:"smooth"})}}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(i);if(r){var n=ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ue(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e)).base=e,n.config=t,n.setup(),n}return t=a,(n=[{key:"onPrimaryAction",value:function(){var e,t,n,i=null!==(e=null===(t=this.playerInput)||void 0===t?void 0:t.playerNames)&&void 0!==e?e:[],r=i.length>=2;this.updateWarningVisibility(r),r&&(null===(n=this.config.onPlayersSelected)||void 0===n||n.call(this,i))}},{key:"setup",value:function(){var e=this.base.querySelector(X);e&&(this.playerInput=new Z(e))}},{key:"updateWarningVisibility",value:function(e){var t=e?[]:[this.config.warningId];re(this.base,t)}}])&&ae(t.prototype,n),a}(K);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(i);if(r){var n=pe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return he(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e)).base=e,n.config=t,n.setup(),n}return t=a,(n=[{key:"round",get:function(){return this._round},set:function(e){e!==this._round&&Number.isFinite(e)&&(this._round=e,this.updateHeader())}},{key:"onSecondaryAction",value:function(){var e;null===(e=this.config.onCancel)||void 0===e||e.call(this)}},{key:"onPrimaryAction",value:function(){var e,t=this.getSelectedPlayer(),n=null!==t;this.updateWarningVisibility(n),n&&(null===(e=this.config.onPlayerSelected)||void 0===e||e.call(this,t))}},{key:"getSelectedPlayer",value:function(){var e=this.base.querySelector('input[type="radio"]:checked');return null===e?null:this.players.find((function(t){return t.id===e.id})).summary}},{key:"renderPlayer",value:function(e){return'<li class="c-radio-button">\n\t\t\t<input class="c-radio-button__input" type="radio" name="player-select" id="'.concat(e.id,'">\n\t\t\t<label for="').concat(e.id,'" class="c-radio-button__button">\n\t\t\t\t').concat(e.summary.name,"\n\t\t\t</label>\n\t\t</li>")}},{key:"renderPlayersList",value:function(){var e=this,t=this.base.querySelector(this.config.selectors.nameList);null!==t&&(t.innerHTML=this.players.map((function(t){return e.renderPlayer(t)})).join(""))}},{key:"setup",value:function(){this.isVisible=this.config.isVisible}},{key:"updateHeader",value:function(){this.header.title="Start Round ".concat(this.round).trim()}},{key:"updateWarningVisibility",value:function(e){var t=e?[]:[this.config.warningId];re(this.base,t)}},{key:"setPlayers",value:function(e){this.players=e.map((function(e,t){return{id:"player_".concat(t),summary:e}})),this.renderPlayersList()}}])&&de(t.prototype,n),a}(K);function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ge,ke="is-visible",Pe=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((ve=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.config=n,this.setup()}var t,n;return t=e,(n=[{key:"background",get:function(){var e;return null===(e=this.config)||void 0===e?void 0:e.background}},{key:"isVisible",get:function(){return this.base.classList.contains(ke)}},{key:"onTransitionEnd",value:function(e){var t,n,i,r;this.isVisible?null===(t=this.config)||void 0===t||null===(n=t.onShown)||void 0===n||n.call(t):null===(i=this.config)||void 0===i||null===(r=i.onHidden)||void 0===r||r.call(i)}},{key:"setup",value:function(){var e,t;void 0===(null===(e=this.config)||void 0===e?void 0:e.onHidden)&&void 0===(null===(t=this.config)||void 0===t?void 0:t.onShown)||this.base.addEventListener("transitionend",this.onTransitionEnd)}},{key:"hide",value:function(){var e;null===(e=this.background)||void 0===e||e.classList.remove(ke),this.base.classList.remove(ke)}},{key:"show",value:function(){var e;null===(e=this.background)||void 0===e||e.classList.add(ke),this.base.classList.add(ke)}}])&&me(t.prototype,n),e}()).prototype,"onTransitionEnd",[i],Object.getOwnPropertyDescriptor(ve.prototype,"onTransitionEnd"),ve.prototype),ve);function we(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}".js-".concat("number-pad");var Se,_e="data-action",Oe="data-value",je={button:"[".concat(_e,"], [").concat(Oe,"]")},Ce=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((ge=function(){function e(t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(i="_value")in this?Object.defineProperty(this,i,{value:"",enumerable:!0,configurable:!0,writable:!0}):this[i]="",this.base=t,this.callback=n,this.bindEvents()}var t,n;return t=e,(n=[{key:"value",get:function(){return""===this._value?void 0:parseInt(this._value,10)},set:function(e){this._value=Number.isFinite(e)?e.toString():""}},{key:"bindEvents",value:function(){this.base.addEventListener("click",this.onClick)}},{key:"onClick",value:function(e){var t=e.target.closest(je.button);null!==t&&(t.hasAttribute(_e)?this.processAction(t.getAttribute(_e)):this.processValue(t.getAttribute(Oe)))&&this.callback&&this.callback(this.value)}},{key:"processAction",value:function(e){if(""===this._value)return!1;switch(e){case"backspace":return this._value=this._value.slice(0,-1),!0;case"clear":return this.reset(),!0;default:return!1}}},{key:"processValue",value:function(e){return this._value+=e,!0}},{key:"reset",value:function(){this._value=""}}])&&we(t.prototype,n),e}()).prototype,"onClick",[i],Object.getOwnPropertyDescriptor(ge.prototype,"onClick"),ge.prototype),ge);function Te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ee,Re=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Se=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.configuration=n,this.setup()}var t,n;return t=e,(n=[{key:"value",get:function(){var e;return null===(e=this.numberPad)||void 0===e?void 0:e.value},set:function(e){void 0!==this.numberPad&&(this.numberPad.value=e,this.showPoints(e))}},{key:"onPointsChanged",value:function(e){var t,n;this.showPoints(e),null===(t=(n=this.configuration).onPointsChanged)||void 0===t||t.call(n,e)}},{key:"setup",value:function(){this.display=this.base.querySelector(this.configuration.selectors.display);var e=this.base.querySelector(this.configuration.selectors.numberPad);null!==e&&(this.numberPad=new Ce(e,this.onPointsChanged)),this.value=this.configuration.defaultPoints}},{key:"showPoints",value:function(e){var t;this.display&&(this.display.textContent=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:"--")}},{key:"reset",value:function(){this.value=this.configuration.defaultPoints}}])&&Te(t.prototype,n),e}()).prototype,"onPointsChanged",[i],Object.getOwnPropertyDescriptor(Se.prototype,"onPointsChanged"),Se.prototype),Se);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Be="data-id",qe=(Ae((Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=De(i);if(r){var n=De(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Le(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e)).base=e,n.config=t,n.setup(),n}return t=a,(n=[{key:"onClicked",value:function(e){var t,n,i,r=null===(t=e.target.closest("[".concat(Be,"]:not(:disabled)")))||void 0===t?void 0:t.getAttribute(Be);void 0!==r&&(this.selectedPlayer=this.players.find((function(e){return e.id===r})),void 0!==this.selectedPlayer&&(this.numberEntry.value=null!==(n=this.selectedPlayer.points)&&void 0!==n?n:0,this.header.title=this.selectedPlayer.summary.name,this.footer.primaryEnabled=!1,null===(i=this.flyIn)||void 0===i||i.show()))}},{key:"onSetPoints",value:function(){var e;0!==this.numberEntry.value&&(this.selectedPlayer.points=this.numberEntry.value),this.renderPlayersList(),null===(e=this.flyIn)||void 0===e||e.hide(),this.header.title=this.config.translations.headerPrompt,this.footer.primaryEnabled=!0}},{key:"onPrimaryAction",value:function(){var e,t,n=0===this.getPlayersWithoutPoints().length;if(this.updateWarningVisibility(n),n){var i=this.players.map((function(e){var t=e.points;return{id:e.summary.id,points:t}}));null===(e=(t=this.config).onPointsCollected)||void 0===e||e.call(t,i)}}},{key:"getPlayersWithoutPoints",value:function(){return this.players.filter((function(e){var t=e.points,n=e.summary.hasEmptyHand;return 0===(null!=t?t:0)&&!n}))}},{key:"renderPlayer",value:function(e){var t=e.id,n=e.points,i=e.summary,r=i.hasEmptyHand,o=i.name;return'<li>\n\t\t\t<button\n\t\t\t\ttype="button"\n\t\t\t\tclass="o-structure o-structure--vertical-center c-score-button"\n\t\t\t\tdata-id="'.concat(t,'"\n\t\t\t\t').concat(r?"disabled":"",'\n\t\t\t>\n\t\t\t\t<p class="o-structure o-structure--vertical o-structure--grow">\n\t\t\t\t\t<span class="c-score-button__name">').concat(o,"</span>\n\t\t\t\t\t").concat(r?"<span>Round winner</span>":"","\n\t\t\t\t\t").concat(void 0===n?"<span>No points set</span>":"","\n\t\t\t\t</p>\n\t\t\t\t").concat(0===(null!=n?n:0)?"":'<p class="c-score-button__score">'.concat(n,"</p>"),"\n\t\t\t\t").concat(r?"":'<p class="c-score-button__chevron">❯</p>',"\n\t\t\t</button>\n\t\t</li>")}},{key:"renderPlayersList",value:function(){var e=this,t=this.base.querySelector(this.config.selectors.playerList);null!==t&&(t.innerHTML=this.players.map((function(t){return e.renderPlayer(t)})).join(""))}},{key:"setup",value:function(){var e=this.base.querySelector(this.config.selectors.flyOut);null!==e&&(this.flyIn=new Pe(e));var t=this.base.querySelector(this.config.selectors.numberEntry);null!==t&&(this.numberEntry=new Re(t,{defaultPoints:0,selectors:{display:".js-number-entry__display",numberPad:".js-number-entry__number-pad"}}));var n=this.base.querySelector(this.config.selectors.setPoints);null!==n&&n.addEventListener("click",this.onSetPoints),this.base.addEventListener("click",this.onClicked),this.isVisible=this.config.isVisible}},{key:"updateWarningVisibility",value:function(e){var t=e?[]:[this.config.warningId];re(this.base,t)}},{key:"setPlayers",value:function(e){this.players=e.map((function(e,t){return{id:"player_".concat(t),points:e.hasEmptyHand?0:void 0,summary:e}})),this.renderPlayersList()}}])&&ze(t.prototype,n),a}(K)).prototype,"onClicked",[i],Object.getOwnPropertyDescriptor(Ee.prototype,"onClicked"),Ee.prototype),Ae(Ee.prototype,"onSetPoints",[i],Object.getOwnPropertyDescriptor(Ee.prototype,"onSetPoints"),Ee.prototype),Ee);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me,Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fe(i);if(r){var n=Fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return We(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e)).base=e,n.config=t,n.setup(),n}return t=a,(n=[{key:"onSecondaryAction",value:function(){var e;null===(e=this.config.onCancel)||void 0===e||e.call(this)}},{key:"onPrimaryAction",value:function(){var e,t=this.config.pointsValidation,n=this.numberEntry.value,i=n>=t.minimum&&n<=t.maximum;this.updateWarningVisibility(i),i&&(null===(e=this.config.onLimitSet)||void 0===e||e.call(this,n))}},{key:"setup",value:function(){this.isVisible=this.config.isVisible;var e=this.base.querySelector(this.config.selectors.numberEntry);null!==e&&(this.numberEntry=new Re(e,{defaultPoints:this.config.defaultPoints,selectors:{display:".js-number-entry__display",numberPad:".js-number-entry__number-pad"}}))}},{key:"updateWarningVisibility",value:function(e){var t=e?[]:[this.config.pointsValidation.warningId];re(this.base,t)}},{key:"reset",value:function(){var e;null===(e=this.numberEntry)||void 0===e||e.reset()}}])&&Ne(t.prototype,n),a}(K);function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}".js-".concat("checkbox-group");var $e,Je=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Me=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.callback=n,this.bindEvents(),this.setup()}var t,n;return t=e,(n=[{key:"selectedValue",get:function(){var e,t;return null!==(e=null===(t=this.selectedCheckbox)||void 0===t?void 0:t.value)&&void 0!==e?e:void 0}},{key:"bindEvents",value:function(){this.base.addEventListener("change",this.onCheckboxSelected)}},{key:"onCheckboxSelected",value:function(e){var t=e.target;t.checked&&this.selectedCheckbox&&(this.selectedCheckbox.checked=!1),this.selectedCheckbox=t.checked?t:null,this.callback&&this.callback(this.selectedValue)}},{key:"setup",value:function(){this.initialCheckbox=this.base.querySelector("input:checked"),this.selectedCheckbox=this.initialCheckbox}},{key:"reset",value:function(){this.selectedCheckbox!==this.initialCheckbox&&(this.selectedCheckbox&&(this.selectedCheckbox.checked=!1),this.selectedCheckbox=this.initialCheckbox,this.selectedCheckbox&&(this.selectedCheckbox.checked=!0))}}])&&Ge(t.prototype,n),e}()).prototype,"onCheckboxSelected",[i],Object.getOwnPropertyDescriptor(Me.prototype,"onCheckboxSelected"),Me.prototype),Me);function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qe,Xe,Ye=".js-".concat("turn-input"),Ze={completedShape:"".concat(Ye,"__completed-shape"),form:"".concat(Ye,"__form"),numberEntry:"".concat(Ye,"__number-entry"),playedTriple:"".concat(Ye,"__played-triple"),playedTripleContainer:"".concat(Ye,"__played-triple-container"),tilesDrawn:"".concat(Ye,"__drawn-tiles")},et=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}(($e=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i="_turnType",r=m.Default,i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.base=t,this.setup()}var t,n;return t=e,(n=[{key:"hasPlayedTriple",get:function(){var e=this.base.querySelector(Ze.playedTriple);return null!==e&&!e.disabled&&e.checked}},{key:"turn",get:function(){return this.convertInputToObject()}},{key:"turnType",get:function(){return this._turnType},set:function(e){e!==this._turnType&&(this._turnType=e,this.updateVisualState())}},{key:"onPointsChanged",value:function(e){this.turnType===m.RoundStart&&(this.base.querySelector(Ze.playedTriple).disabled=(null!=e?e:0)%3!=0)}},{key:"convertInputToObject",value:function(){var e={completedShape:this.completedShape.selectedValue,turnType:this._turnType};return void 0!==this.numberEntry.value&&(e.points=this.numberEntry.value),this.tilesDrawn.selectedValue&&(e.tilesDrawn=parseInt(this.tilesDrawn.selectedValue,10)),this.hasPlayedTriple&&(e.isTriple=!0),e}},{key:"setup",value:function(){var e=this.base.querySelector(Ze.completedShape),t=this.base.querySelector(Ze.numberEntry),n=this.base.querySelector(Ze.tilesDrawn);null!==e&&(this.completedShape=new Je(e)),null!==t&&(this.numberEntry=new Re(t,{onPointsChanged:this.onPointsChanged,selectors:{display:".js-number-entry__display",numberPad:".js-number-entry__number-pad"}})),null!==n&&(this.tilesDrawn=new Je(n)),this.updateVisualState()}},{key:"updateVisualState",value:function(){this.completedShape&&(this.completedShape.base.hidden=this.turnType!==m.Default),this.tilesDrawn&&(this.tilesDrawn.base.hidden=this.turnType!==m.Default);var e=this.base.querySelector(Ze.playedTripleContainer);null!==e&&(e.hidden=this.turnType!==m.RoundStart)}},{key:"reset",value:function(){var e,t,n,i=this.base.querySelector(Ze.playedTriple);i&&(i.checked=!1),null===(e=this.completedShape)||void 0===e||e.reset(),null===(t=this.numberEntry)||void 0===t||t.reset(),null===(n=this.tilesDrawn)||void 0===n||n.reset(),this.numberEntry.base.scrollIntoView()}}])&&Ke(t.prototype,n),e}()).prototype,"onPointsChanged",[i],Object.getOwnPropertyDescriptor($e.prototype,"onPointsChanged"),$e.prototype),$e);function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?ot(e):t}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.RoundLocked="round-locked",e.RoundWon="round-won"}(Qe||(Qe={})),function(e){e.Default="default",e.RoundLocked="round-locked",e.RoundStart="round-start",e.RoundWon="round-won"}(Xe||(Xe={}));var ut=w.instance,ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=at(i);if(r){var n=at(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rt(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),lt(ot(n=o.call(this,e)),"_roundType",Xe.Default),lt(ot(n),"maxPassedTurnStreak",0),lt(ot(n),"passedTurnsStreak",0),lt(ot(n),"turnInput",null),n.base=e,n.config=t,n.setup(),n}return t=a,(n=[{key:"activePlayer",get:function(){return this._activePlayer},set:function(e){this._activePlayer=e,this.header.title=null==e?void 0:e.name}},{key:"roundType",get:function(){return this._roundType},set:function(e){if(e!==this._roundType)switch(this._roundType=e,e){case Xe.Default:this.turnInput.turnType=m.Default,this.header.subtitle="turn in progress";break;case Xe.RoundStart:this.turnInput.turnType=m.RoundStart,this.header.subtitle="Eerste speelbeurt";break;default:this.turnInput.turnType=m.Collection,this.header.subtitle="collecting points"}}},{key:"onPrimaryAction",value:function(){var e=this.turnInput.turn;this.processPlayerInput(e)}},{key:"onSecondaryAction",value:function(){var e,t;null===(e=(t=this.config).onShowLeaderboard)||void 0===e||e.call(t)}},{key:"goToNextPlayer",value:function(){this.activePlayer=ut.activateNextPlayer(),this.turnInput.reset()}},{key:"processPassedTurn",value:function(){var e,t;this.passedTurnsStreak++,this.passedTurnsStreak!==this.maxPassedTurnStreak?this.goToNextPlayer():null===(e=(t=this.config).onRoundCompleted)||void 0===e||e.call(t,Qe.RoundLocked)}},{key:"processPlayedTurn",value:function(){var e,t;this.passedTurnsStreak=0,this.roundType=Xe.Default,ut.activePlayer.hasEmptyHand?null===(e=(t=this.config).onRoundCompleted)||void 0===e||e.call(t,Qe.RoundWon):this.goToNextPlayer()}},{key:"processPlayerInput",value:function(e){var t,n,i=function(e){return{scoreDelta:E(e),tileDelta:R(e)}}(e);ut.updateActivePlayerScore(i.scoreDelta),ut.updateActivePlayerTileCount(i.tileDelta),null===(t=(n=this.config).onTurnSubmitted)||void 0===t||t.call(n,i),void 0===e.points?this.processPassedTurn():this.processPlayedTurn()}},{key:"reset",value:function(){this.maxPassedTurnStreak=ut.players.length,this.passedTurnsStreak=0,this.turnInput.reset()}},{key:"setup",value:function(){var e=this.base.querySelector(Ye);null!==Ye&&(this.turnInput=new et(e))}},{key:"play",value:function(e){this.roundType=e,this.reset()}},{key:"start",value:function(e){this.activePlayer=ut.setActivePlayer(e),this.roundType=Xe.RoundStart,this.reset()}}])&&nt(t.prototype,n),a}(K),st=["🥇","🥈","🥉"];function ft(e,t){var n=function(e){var t,n=function(e){if(Array.isArray(e))return j(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return n.sort((function(e,t){return t.score-e.score})),n.map((function(e){return e.id}))}(e),i=e.map((function(e){var i,r=n.findIndex((function(t){return t===e.id})),o=null!==(i=st[r])&&void 0!==i?i:r+1;return"<tr>\n\t\t\t<td>".concat(o,"</td>\n\t\t\t<td>").concat(e.name,"</td>\n\t\t\t<td>").concat(e.score,"</td>\n\t\t\t").concat(t?"<td>".concat(e.tileCount,"</td>"):"","\n\t\t</tr>")})).join("");return"<tbody>\n\t\t".concat(i,"\n\t</tbody>")}function dt(e,t){return'<table class="c-leaderboard">\n\t\t'.concat((n=t.includeTiles,"<thead>\n\t\t<tr>\n\t\t\t<th></th>\n\t\t\t<th>Player</th>\n\t\t\t<th>Score</th>\n\t\t\t".concat(n?"<th>Tiles</th>":"","\n\t\t</tr>\n\t</thead>")),"\n\t\t").concat(ft(e,t.includeTiles),"\n\t</table>");var n}function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bt(i);if(r){var n=bt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vt(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e)).base=e,n.config=t,n.setup(),n}return t=a,(n=[{key:"onPrimaryAction",value:function(){var e,t;null===(e=(t=this.config).onStartNewGame)||void 0===e||e.call(t)}},{key:"setup",value:function(){this.board=this.base.querySelector(this.config.selectors.board)}},{key:"showLeaderboard",value:function(e){null!==this.board&&(this.board.innerHTML=dt(e,{includeTiles:!1}))}}])&&ht(t.prototype,n),a}(K);function gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kt,Pt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.config=n,this.setup()}var t,n;return t=e,(n=[{key:"setup",value:function(){var e=this;this.board=this.base.querySelector(this.config.selectors.board);var t=this.base.querySelector(this.config.selectors.closeTrigger),n=document.querySelector(this.config.selectors.background);null!==t&&t.addEventListener("click",(function(){var t;null===(t=e.flyOutController)||void 0===t||t.hide()})),this.flyOutController=new Pe(this.base,{background:null!=n?n:void 0,onHidden:function(){return e.base.hidden=!0}})}},{key:"showLeaderboard",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0!==this.board&&(this.board.innerHTML=dt(e,{includeTiles:n}),this.base.hidden=!1,setTimeout((function(){var e;return null===(e=t.flyOutController)||void 0===e?void 0:e.show()}),0))}}])&&gt(t.prototype,n),e}();function wt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var St,_t="is-active",Ot=(function(e,t,n,i,r){var o={};Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((kt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base=t,this.callback=n,this.bindEvents()}var t,n;return t=e,(n=[{key:"bindEvents",value:function(){this.base.addEventListener("transitionend",this.onTimeOut)}},{key:"onTimeOut",value:function(e){var t;"transform"===e.propertyName&&(null===(t=this.callback)||void 0===t||t.call(this))}},{key:"stop",value:function(){this.base.classList.remove(_t)}},{key:"start",value:function(){this.base.classList.add(_t)}}])&&wt(t.prototype,n),e}()).prototype,"onTimeOut",[i],Object.getOwnPropertyDescriptor(kt.prototype,"onTimeOut"),kt.prototype),kt);!function(e){e.Names="names",e.PlayerSelect="player-select",e.PointsLimit="points-limit",e.Round="round",e.Collection="collection",e.Leaderboard="leader-board"}(St||(St={}));var jt,Ct={limitReached:!1,pointsLimit:0,round:1,roundReason:Qe.RoundWon,startingPlayer:null},Tt=new D,Et=w.instance,Rt=new n([{id:St.Names},{id:St.PointsLimit},{id:St.PlayerSelect},{id:St.Round},{id:St.Collection},{id:St.Leaderboard}],{instanceFactory:function(e){switch(e){case St.Collection:return null===(t=document.querySelector(".js-point-collection"))?null:new qe(t,{isVisible:!1,onPointsCollected:It,selectors:{flyOut:".js-point-collection__fly-out",numberEntry:".js-point-collection__number-entry",playerList:".js-point-collection__list",setPoints:".js-point-collection__set-points"},translations:{headerPrompt:"Select a player"},warningId:"warning-points-missing"});case St.Leaderboard:return function(){var e=document.querySelector(".js-leaderboard");return null===e?null:new mt(e,{onStartNewGame:Vt,selectors:{board:".js-leaderboard__board"}})}();case St.Names:return function(){var e=document.querySelector(".js-game-start");return e?new se(e,{onPlayersSelected:zt,selectors:{form:""},warningId:"warning-required-players"}):null}();case St.PlayerSelect:return function(){var e=document.querySelector(".js-player-select");return null===e?null:new be(e,{isVisible:!1,onCancel:At,onPlayerSelected:Bt,selectors:{nameList:".js-player-select__list"},warningId:"warning-select-starting-player"})}();case St.PointsLimit:return function(){var e=document.querySelector(".js-point-limit");return null===e?null:new Ue(e,{defaultPoints:400,isVisible:!1,onCancel:xt,onLimitSet:Lt,pointsValidation:{minimum:100,maximum:1e3,warningId:"warning-invalid-points-limit"},selectors:{numberEntry:".js-point-limit__number-entry"}})}();case St.Round:return function(){var e=document.querySelector(".js-round");return null===e?null:new ct(e,{onRoundCompleted:Dt,onShowLeaderboard:function(){return Ft(!0)},onTurnSubmitted:qt,selectors:{flyOut:".js-round__fly-out",flyOutClose:".js-round__fly-out-close",leaderboard:".js-round__leaderboard"}})}();default:return null}var t},onInstanceActivated:function(e){switch(e.id){case St.Collection:e.instance.setPlayers(Et.players);break;case St.Leaderboard:e.instance.showLeaderboard(Et.players);break;case St.PlayerSelect:(t=e.instance).setPlayers(Et.players),t.secondaryActionTitle=Nt()?"Back":"Leaderboard",t.round=Ct.round;break;case St.PointsLimit:e.instance.reset();break;case St.Round:e.instance.start(Ct.startingPlayer.id)}var t}});function xt(){Rt.goBack()}function zt(e){var t,n,i=(t=e.length,n=Math.min(Math.max(0,t-2),4),_[n]);Et.createPlayers(e,i),Rt.goForward()}function It(e){var t,n,i=function(e){var t=e.reduce((function(e,t){return t.points<e.points?t:e}),T),n=e.filter((function(e){return e.id!==t.id})).reduce((function(e,t){return e+t.points}),0);return{id:t.id,points:n-t.points}}(e),r=null!==(t=null===(n=Et.players.find((function(e){return e.id===i.id})))||void 0===n?void 0:n.name)&&void 0!==t?t:"";Et.updatePlayerScore(i.id,i.points),function(e,t){Tt.showDialog("round-winner",{onClose:function(){Ct.limitReached?setTimeout(Ht,0):Rt.goTo(St.PlayerSelect)},placeholders:{name:t,points:e.toString(10)}})}(i.points,r),Ct.round++}function Lt(e){Ct.pointsLimit=e,Rt.goForward()}function Dt(){Ct.roundReason===Qe.RoundWon&&Et.updateActivePlayerScore(25),Ct.limitReached=!1,Rt.goForward()}function At(){Nt()?Rt.goBack():Ft()}function Bt(e){Ct.startingPlayer=e,Et.resetTileCount(),Rt.goForward()}function qt(e){var t=!Ct.limitReached;Ct.limitReached=Ct.limitReached||Et.activePlayer.score>=Ct.pointsLimit;var n=t&&Ct.limitReached?Wt:void 0;!function(e,t){var n="".concat(e>0?"+":"").concat(e);Tt.showDialog("turn-played",{onBeforeShow:function(e){var t=e.querySelector(".js-dialog__close");if(null!==t){var n=new Ot(t,(function(){return Tt.hideDialog()}));setTimeout((function(){return n.start()}),0)}},onClose:t,placeholders:{delta:n,name:Et.activePlayer.name,score:Et.activePlayer.score.toString(10)}})}(e.scoreDelta,n)}function Vt(){Rt.goTo(St.Names)}function Nt(){return 1===Ct.round}function Ht(){var e=Et.firstRankedPlayer;Tt.showDialog("game-winner",{onClose:function(){return Rt.goForward()},placeholders:{name:e.name,score:e.score.toString(10)}})}function Wt(){Tt.showDialog("last-round",{placeholders:{name:Et.activePlayer.name,limit:Ct.pointsLimit.toString(10)}})}function Ft(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=Ct.leaderBoardFlyOut)||void 0===e||e.showLeaderboard(Et.players,t)}null!==(jt=document.querySelector(".js-leaderboard-fly-out"))&&(Ct.leaderBoardFlyOut=new Pt(jt,{selectors:{background:"main",board:".js-leaderboard-fly-out__leaderboard",closeTrigger:".js-leaderboard-fly-out__close"}}))})()})();
//# sourceMappingURL=main.a18b6bcc.js.map